<!DOCTYPE html>

<head>
    <meta charset="utf-8">

    <title>Knockoff Demo</title>
</head>

<body>
    <h1>Knockoff Demo</h1>

    <h2>Character Sheet for <span data-mapping="name"></span></h2>
    <p>
        <label for="name">Name</label>
    </p>
    <p>
        <input data-mapping="name" id="name" type="text">
    </p>
    <p>
        <label for="level">Level</label>
    </p>
    <p>
        <input data-mapping="level" id="level" type="text">
    </p>
    <p>
        <label for="race">Race</label>
    </p>
    <p>
        <select data-mapping="race" id="race">
            <option value="">Select one...</option>
            <option value="Human">Human</option>
            <option value="Klingon">Klingon</option>
            <option value="Vulcan">Vulcan</option>
        </select>
    </p>
    <p>
        <label for="strength">Strength</label>
    </p>
    <p>
        <input data-mapping="strength" id="strength" type="text">
    </p>
    <p>
        <input data-mapping="undead" id="undead" type="checkbox" value="true">
        <label for="undead">Undead</label>
    </p>

    <h2>Wisdom</h2>
    <p>
        <label for="wisdom-score">Score</label>
    </p>
    <p>
        <input data-mapping="wisdom.score" id="wisdom-score" type="text">
    </p>
    <p>
        <label for="wisdom-modifier">Modifier</label>
    </p>
    <p>
        <input data-mapping="wisdom.modifier" id="wisdom-modifier" type="text">
    </p>

    <h2>Skills</h2>
    <h3>Programming</h3>
    <p>
        <label for="skills-programming-day">Day<label>
    </p>
    <p>
        <input data-mapping="skills.programming.day" id="skills-programming-day" type="text">
    </p>
    <p>
        <label for="skills-programming-night">Night<label>
    </p>
    <p>
        <input data-mapping="skills.programming.night" id="skills-programming-night" type="text">
    </p>
</body>

<script src="js/KO-1.0.12.js"></script>
<script>
    // ECMAScript 5 strict mode
    'use strict';

    function Person(params) {
        params = params || {};

        this.name = params.name;
        this.level = params.level;
        this.race = params.race;
        this.strength = params.strength;
        this.undead = params.undead;
        this.wisdom = params.wisdom;
        this.skills = params.skills;
    }

    var person = new Person({
        name: 'Dave',
        level: 10,
        race: 'Human',
        strength: 4,
        undead: true,
        wisdom: {
            score: 5,
            modifier: -2
        },
        skills: {
            programming: {
                day: 10,
                night: 100
            }
        }
    });

    KO.bind(person);

    KO.listen(function () {
        person.strength = person.level / 2;

        if (person.undead) {
            person.strength--;
        }
    }, 'level', 'undead');
</script>
